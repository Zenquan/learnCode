##一、学习目标

小伙伴们，前两节课程我们学习了c语言的数据类型，了解了整形、浮点型、字符型和字符串的相关知识。这节课我们将要讲述c语言的运算符和表达式，各位会做很多计算题，这些将要大量的涉及到前两节课程中数据类型。学习内容包括

**1.基本的算数运算符**

**2.自增、自减运算符**

**3.不同数据类型之间的混合运算**

**4.强制类型转换**

**5.数据的输入和输出**

##二、基本的算数运算符

**常用的算术运算符表**

+ `x + y`：将x与y相加
+ `x - y`：将x与y相减
+ `x * y`：将x与y相乘
+ `x / y`：x除以y
+ `x % y`：求x除以y的余数


####注意

1.x/y中，两个实数（亲！注意说的是实数）相除的结果是双精度实数，两个整数相除的结果为整数。如5/3的结果为1，舍去小数部分。

2.%运算符要求参加运算的对象为整数，结果也是整数。如7%3，结果为1，除了%以外的运算符的操作数都可以是任何算数类型。

下面我们举例说明上述注意事项：

**编写程序5-1.c**

````
# include<stdio.h>
int main()
{
	int a=22;
	int b=3;
	printf("%d\n",a/b);
	return 0;
 }
```

**运行后之后，大家可以看到运行的结果是7而非7.33333**

**我们用gedit从新打开5-1.c作出以下修改**

```
# include<stdio.h>
int main()
{
	float a=22.5;
	int b=3;
	printf("%d\n",a%b);
	return 0;
 }
 
```

现在我们从新编译该程序，显示出以下结果。

![Alt text](https://dn-anything-about-doc.qbox.me/c/5-3.jpg)

编译出现error表示编译未成功（出现warning表示警告，但是编译已经成功生成了可执行文件），并提示了错误内容。

**这也验证了我们在注意中提到的%运算符要求参加运算的对象为整数**

##三、自增、自减运算符

作用是使变量的值加1或减1，例如：
++i,--i(在使用i之前，先使i加（减）1)
i++，i--（在使用i之后，使i的值加（减）1）

猛地一看，++i和i++的作用相当于i=i+1。但是++i和i++的不同之处在于++i是先执行i=i+1后，再使用i的值；而i++是先使用i的值之后，再执行i=i+1。我们看下面的例子

**编写源程序5-2.c**

```
# include<stdio.h>
int main()
{
	int a=5;
	printf("%d\n",a++);
	printf("%d\n",++a);
	return 0;
 }
```

编译之后的结果是
```
5
7
```

大家千万不要以为结果应该是
```
5
6
```
因为a++以后a的值已经成为了6，而非是5，经过++a后的值是7.
这个程序虽然简单，大家还是需要认真思考一番。

####注意
自增运算符（++）和自减运算符（--）只能用于变量，而不能用于常量或表达式。如5++或者（a+b）++都是不合法的。因为5是常量，常量的值是不能改变的。（a+b）++也是不可能实现，加入a+b的值是5，自增后变为6放在什么地方呢？无变量可供存放。


####现在大家可能还不能感受到自增和自减的用处，等我们学到循环语句和指针的时候，你将会在大量的程序中看到自增和自减。


##四、不同数据之间的混合运算
在程序中经常会遇到不同类型的数据进行运算，比如7*3.5。如果一个运算符的两侧数据类型不同，则先进行类型的转换，使两者具有同一种类型，然后进行运算。因此整形、浮点型、字符型数据之间可以进行混合运算。
数据类型计算的时候究竟是如何转换类型的呢？大家先看下表：

![Alt text](https://dn-anything-about-doc.qbox.me/c/5-4.jpg)

（1）如果int类型的数据和float或double型数据进行运算时，先把int型和float型数据转换为double型数据，然后进行运算，结果为double型。其他的大家可以按照上图来做。

（2）字符（char）型数据和整形数据进行运算，就是把字符的ASCII代码与整形运算。如4+'B',由于字符'B'的ASCII代码是66，相当于66+4=70。字符型数据可以直接和整形数据进行运算。如果字符型数据和浮点型数据运算，则将字符的ASCII码先转化为double型，然后在进行运算。
 
我们编写一个程序分析一下他们转换的编译过程，编写程序5-3.c
```
# include<stdio.h>
int main()
{
    int i=3;
    float f=4.3;
    double d=7.5;
    double sum;
    sum=10+'a'+i*f-d/3;
	return 0;
 }
 
```

在`sum=10+'a'+i*f-d/3;`这条语句中，右边的表达式从左到右扫描，运算次序为：
+ 10+'a'的运算，'a'的值是整数97，运算结果为107.
+ i*f的运算。先将i与f都转换为double型，两者运算12.9，double型。
+ 整数107与i*f的值相加，结果为119.9，double型。
+ d/3的运算，现将3转换double类型，d/3的结果为2.5，double型
+ 将119.9与2.5相减，117.4，double型

编写5-4.c，给定一个大写字母要求用小写字母输出。
**解题思路：**我们前面已经介绍过，字符数据以ASCII码存储在内存中，形式与整数的存储形式相同，所以字符型数据和其他算数型数据之间可以相互赋值和运算。
通过ASCII码表我们可以找到同一个字母的大写形式和小写形式之间有什么内在的联系。那就是同一个字母，用小写表示的字符的ASCII码比用大写表示的ASCII码大32。
编写5-4程序如下
```
#include<stdio.h>
int main()
{
    char c1,c2;
    printf("Please enter a capital letter:");
    scanf("%c",&c1);
    c2=c1+32;
    printf("\n%c",c2);
    return 0;
}
```

我们的程序运行如下：

![Alt text](https://dn-anything-about-doc.qbox.me/c/5-5.jpg)

##五、强制类型转换
可以利用强制类型转换运算符将一个表达式转换为所需的类型，例如：
（double）a                    (将a转换成为double型)
（int)(x+y)       （将x+y的值转换成为int类型)
其一般形式就是

**（类型名）（表达式）**

上述例子中如果写成（int）x+y
则只将x转换成为整形在与y相加。

**需要说明的是，在强制类型转换时，得到一个所需类型的中间数据，而原来变量的类型未发生变化。例如：
a=（int）x
如果已经定义了x为float型变量，a为整形变量，进行强制类型运算（int）x后得到一个int类型的临时值，它的值等于x的整数部分，把它赋值给a，注意x的值和类型都未变化，仍为float型，该临时值在赋值后就不再存在了。**

##六、数据的输入和输出
之前为了方便大家学习，我们粗略的讲述过scanf和printf函数。这一小节内容，我们系统的讲述数据的输入和输出。
###1.举例说明
求ax^2+bx+c=0方程的根。a,b,c由键盘输入，设b^2-4ac>0
**解题思路**我们知道

![Alt text](https://dn-anything-about-doc.qbox.me/c/5-6.jpg)

有了这个式子，我们只要知道a,b,c的值，就能求出方程的两个根。接下来我们编写程序5-5
，程序如下：

```
#include<stdio.h>
#include<math.h>               //程序中要调用求平方根函数sqrt
int main()
{
    double a,b,c,disc,x1,x2,p,q;
    scanf("%lf%lf%lf",&a,&b,&c);
    disc=b*b-4*a*c;
    p=-b/(2.0*a);
    q=sqrt(disc)/(2.0*a);
    x1=p+q,x2=p-q;
    printf("x1=%7.2f\nx2=%7.2f\n",x1,x2);
    return 0;
}
```

**编译时需要注意**
**在Linux系统下，Ｃ源文件若调用了math库里的函数，则编译时要加上-lm（是字母l，不是数字１），表示链接到math库。**

![Alt text](https://dn-anything-about-doc.qbox.me/c/5-7.jpg)

####程序分析
（1）在scanf函数中，格式声明为"%lf",表示输入的是双精度型实数。从上面的运行结果来看输入“1 3 2”时，两个数字之间是用空格分开，如果用其他符号（如逗号）会出错。我们输入的1 3 2虽然是整数，但是由于指定了用%lf的格式输入，因此系统会先把这3个整数装换成为实数1.0,3.0,2.0然后赋值给变量a，b，c。

（2）在printf函数中，不是简单地用%f格式声明，而是在格式符f的前面加了“7.2”。表示的意思是在输出x1，x2时，指定数据占7列，其中小数占2列。这样做有两个好处。
1.可以根据实际需求来输出小数的位数，因为并不是任何时候都需要6位小数的。
2.如果输出多个数据各占一行，用同一个格式输出，即使输出的数据整数部分不同，但输出时上下行必然按小数点对齐，使输出数据整齐美观。

（3）因为我们假设了a,b,c的值满足b^2-4ac>0，但是实际我们输入的abc三个值并不一定满足要求，所以我们在程序中先判断a,b,c的值是否满足b^2-4ac>0。只有满足，我们采用使用上述方法计算，判断我们将会在下一节课程中讲述。

###2.printf和scanf中的格式字符
前面我们已经介绍了，在输入输出时，对不同的数据要指定不同的格式声明，而格式声明最重要的就是格式字符，我们在此做下总结：

![Alt text](https://dn-anything-about-doc.qbox.me/c/5-8.jpg)

**这个表不用死记，开始时会用比较简单的形式输入数据即可。在这里我们也不会详细的阐述，如果想要学习相关内容，可以买相关书籍**

**小知识点：**
（1）在输入函数时，用%c格式声明输入字符时，空格字符和转义字符都是作为有效字符输入，例如：
```
scanf("%c%c%c",&c1,&c2,&c3);
```

在执行这个程序时，需要我们连续输入3个字符，中间不要有空格，如下：
```
abc
```

下面插入空格的形式是错误的：
```
a b c
```

这种形式第一个字符'a'送给c1，第二个字符是空格字符' '送给了c2，第三个字符'b'送给了c3

（2）在使用%d输出时，我们可以指定输出的宽度。
具体用法

+ `%d`：按照整型数据的实际长度输出。
+ `%md`：以m指定的字段宽度输出，右对齐。
+ `%ld`：输出长整型数据。
+ `%mld`：输出指定宽度的长整型数据。

我们编写5-6.c程序可以体验一下

```
#include<stdio.h>
int main()
{
	int a=12,b=-3456;
	long int c=123456;
	printf("%5d\n",a);
	printf("%d\n",b);
	printf("%ld\n",c);
	printf("%6md\n",c);
	return 0;
}
```

会得到输出结果

```
   12
-3456
123456
123456
```

###3.字符数据的输入输出

除了可以用printf函数和scanf函数输出和输入的字符外，C库函数还提供一些专门用于输入和输出的字符的函数。

####（1）用putchar函数输出一个字符
**一般形式：**
putchar(c);

**功能：**
输出变量c所代表的一个字符。

**说明：**
c为字符型变量或整型变量。

我们建立5-7.c程序，输入以下内容：
```
#include <stdio.h>
main()
{
	char a,b,c;
	a='O';b='K';c='\n';
	putchar(a);putchar(b);putchar(c);
}
```

输出结果为
```
OK
```

通过此例我们可以看到：用putchar函数既可以输出能在显示器屏幕上显示的字符，也可以输出屏幕控制字符，如\n的作用就是输出一个换行符，使输出的当前位置移到下一行的开头。

####（2）用getchar函数输入一个字符
**一般形式：**
getchar（）

**功能：**
要求用户从终端（键盘）输入单个字符。

**返回值：**
从输入设备上得到的字符。

我们现在改写之前的一个练习，实现在键盘上输入一个大写字母，显示一个对应的小写字母。建立5-8.c，输入一下程序:
```
#include <stdio.h>
int main()
{
   char c;
   printf("Input an uppercase letter:\n");
   c=getchar();
   putchar(c+32);
   return 0;
}
```

**注意：运行程序时，系统等待用户输入，注意回车也是一个合法字符。**

输出结果：

![Alt text](https://dn-anything-about-doc.qbox.me/c/5-10.jpg)

##七、小结
到这里我们本节课程就已经结束了，在这节课我们讲述了运算符，数据类型转换以及数据的输入和输出。也是到这里我们就可以说是大家已经了解了c语言的基础知识，从下一节课，我们将要讲述c语言的选择结构。

##八、练习
1.请编写程序将“ShiYanLou”译成密码，用原来的字母后面第一个字母替代原来的字母。例如A后面的第二个字母是B，因此“ShiYanLou”应该译成“TijZboMpv”。请大家编写一个程序，用赋初值的方法使c1，c2，c3，c4，c5，c6,c7,c8,c9这9个变量值分别为'S''h''i''Y''a''n''L''o''u',经过运算c1，c2，c3，c4，c5，c6,c7,c8,c9分别变为'T''i''j''Z''b''o''M''p''v'。分别用putchar函数和printf函数输出这9个字符。

2.设一个圆柱底面圆的半径r=2.5，圆柱的高h=3，求底面圆周长、圆面积以及圆柱的体积。用scanf输入数据，输出计算结果，要求保留小数点后两位。




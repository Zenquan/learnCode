##一、本节目标
大家走到现在可以说已经掌握了c语言最基础的部分，我们学习了c语言的数据类型、三大结构，这个时候可以说我们已经算是入门了。但是这个时候我们其实远没有学到c语言的精彩部分，接下来我们将要讲述的数组就是c语言精彩部分的一节-数组。本节目标：
+ 一维数组
+ 二维数组
+ 字符数组


##二、一维数组

我们通过一个案例来简单的理解数组。班主任要计算班级里面50个同学四级考试成绩的平均成绩，道理上讲这是一个比较简单的问题，只需要把每个人的成绩加起来除以50就可以了。但是如何表示50个人的成绩呢？按照我们之前的逻辑定义50个变量，s1，s2，s3...s50，但是你有没有发现这样存在的问题？第一，这是50个学生，假如是5000个呢？这样定义很繁琐。第二，这样的定义没有反应出他们之间内在的联系，他们都是一个班级的，都是统计的四级成绩，这样的问题如何解决呢？
首先我们可以用同一个名字表示他们（如S<sub></sub>），而在名字的右下角加一个数字来表示这是第几名学生的成绩，例如，可以用S<sub>1</sub>，S<sub>2</sub>，S<sub>3</sub>代表学生1、学生2、学生3......学生50等50个学生的成绩。这个右下角的数字常称为下标。一批具有同名的同属性的数据就组成一个数组（array），就是数组名。我们首先从一维数组来理解和学习。

###定义一维数组
定义一维数组的一般形式为

**类型符 数组名[常量表达式]**

例如定义以下数组：
```
int student[10];
```

**注意：**

（1）数组名的命名规则和变量名相同，遵循标识符命名规则。

（2）在定义数组时，需要指定数组中元素的个数，方括号中的常量表达式用来表示元素的个数，即数组长度。例如，student[10]，表示a数组有10个元素。注意，下标是从0开始的，这10个元素分别是student[0]...student[9]。一定要注意这里面不会有student[10].

（3）常量表达式中可以包括常量和符号变量，如“int a[4*2]”是合法的。但是不能包括变量，如下面的就是不合法的：
```
int n;
scanf("%d",&n);
int b[n];
```

经过上面的定义，在内存中划出一片存储空间（空间大小：4*10=40字节），存放一个含有10个整形元素的数组。

![Alt text](https://dn-anything-about-doc.qbox.me/c/7-13.jpg)

###一维数组的初始化
为了让程序简洁，我们常常在定义数组的同时，给各数组元素赋值，这就是数组的初始化。
（1）在定义数组时对全部数组元素赋予初值。例如：
```
int a[10]={0,1,2,3,4,5,6,7,8,9}；
```

经过上面的定义并初始化之后，a[0]=0,a[1]=1,a[2]=2,a[3]=3,a[4]=4,a[5]=5,a[6]=6,a[7]=7,a[8]=8,a[9]=9

（2）给数组中的部分元素赋值，例如：
```
int a[10]={0,1,2,3};
```

定义a数组有10个元素，但是花括号内只给了4个初值，这表示只给前4个元素赋初值，其余元素系统自动给其赋初值为0。

###一维数组举例
（1）定义一个含有10个元素的数组，依次赋值为1,2,3,4,5,6,7,8,9,10，然后按逆序输出。

**解题思路**：要赋的值是1~10，有一定规律，我们可以用循环来赋值。同样，用循环来输出这10个值，在输出时，先输出最后的元素，按下标从大到小输出这10个元素。

```
#include<stdio.h>
int main()
{
    int i,a[10];
    for(i=0;i<10;i++)
    a[i]=i+1;
   
    for(i=9;i>=0;i--)
    printf("%d\t",a[i]);
    return 0;
    
}
```
**输出结果：**
![Alt text](https://dn-anything-about-doc.qbox.me/c/8-3.png)

（2）现在输入10个用户的有效学习时间，要求对它们按由小到大的顺序排序。

**解题思路**：这种问题是一个典型的排序问题，排序方法是一种重要且基本的算法，我们在此使用“冒泡排序法”，其思路为：每次将相邻两个数比较，将小的调到前面，如果有6个数：8,7,5,4,2,0。第一次先将最前面的两个数8和7对调（看下图）。第二次将第二个数和第三个数（8和5）对调.....如此总计进行了5次，得到7-5-4-2-0-8的顺序，可以看到：最大的数8已经沉底，成为最下面的一个数，而小的数上升。经过第一轮（5次比较）后，得到了最大的数9。

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-1.png)

然后进行第二轮的比较（见下图），对余下的7,5,4,2,0进行新一轮的比较，以便使次大的数沉底。经过这一轮4次的比较与交换，得到次大的数7。

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-2.png)

按照此规律进行下去，可以推知6个数需要比较5轮，其中第一轮需要比较5次，第二轮需要比较4次....第五轮只需比较一次。

如果有n个数，则需要比较n-1轮，在第一轮比较重要进行n-1次两两比较，在第j轮中要进行n-j次的两两比较。

这种如水底的气泡逐步冒出水面一样，故称之为冒泡法。

编写8-2.c的源程序，程序如下：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-6.png)


运行结果：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-5.png)

##三、二维数组
很多问题我们需要用到二维数组，比如一个年级有4个班，每个班有30个人，需要统计每个班的学生成绩，这个时候就要用的二维数组。如果建立一个数组student，第一维用来表示第几班，二维用来表示第几号，比如`$$student_2,_3$$`表示2班的3号同学。

###定义二维数组
二维数组的定义方法和一维数组类似，其一般形式为：

**类型说明符 数组名[常量表达式][常量表达式]**

例如：
```
float a[3][4];
```

c语言中，二维数组在内存中存放的顺序是按行存放的，即在内存中先顺序存放第一行元素，接着再来存放第二行元素。
假设数组存放是从2000开始的，一个元素占用4个字节，下图就是a[3][4]在内存中存放的具体形式。

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-8.png)

###二维数组的初始化
（1）分行给二维数组赋初值。例如：

```
int a[3][4]={{1,2,3,4},{5,6,7,8},{9,10,11,12}};
```

这种赋值方法比较直观，把第一个花括号的值给第0行元素，第2个花括号的值给第一行元素....

（2）可以将所有的数据放在一个花括号内，例如：

```
int a[3][4]={1,2,3,4,5,6,7,8,9,10,11,12};
```

效果和（1）相同。但是很显然第一种方式较好，一行对一行，界限很清楚。用第二种方法如果数据多，则会写成一大片，容易遗漏。

（3）可以对部分元素赋初值。例如：

```
int a[3][4]={{1},{3},{5}};
```

它的作用是只给各行第0列的元素赋初值，其他元素默认为0.赋初值后的结果为：
```
1 0 0 0
3 0 0 0
5 0 0 0
```

###二维数组的举例

(1)有一个3*4的矩阵，求出其中的最大值并输出最大值和其所在的行号和列号。

**解题思路**：先思考一下在打擂台的时候怎样确定最后的优胜者。先找出任一个人站在台上，第2个人上去与之比武，胜者留在台上。再上去第3个人，与太上的人比武，胜者留在台上，败者下台。以后每一个人都和当时留在台上的人比武。直到所有人都上台比过为止，最后留在台上的就是冠军，这中方法就是打擂台法。
我们本题目也采用打擂台算法。先让a[0][0]做“擂主”，把它的值赋给变量max，max用来存放当前已知的最大值，在开始时还未进行比较，把最前面的元素认为是当前最大值，然后让下一个元素a[0][1]和max比较，如果a[0][1]>max，则把a[0][1]赋值给max，取代max的原值。以后以此处理，直到全部比完之后，max就是最大值。

8-3程序如下：
```
#include<stdio.h>
int main()
   {
       int i,j,row=0,colum=0,max;
       int a[3][4]={{3,4,16,2},{7,5,1,9},{11,23,3,8}};
       max=a[0][0];
       for(i=0;i<3;i++)
         for(j=0;j<4;j++)
          if(a[i][j]>max)
              {
                 max=a[i][j];
                 row=i;
                 colum=j;
              }
              
       printf("max=%d\nrow=%d\ncolum=%d\n",max,row,colum);
       return 0;
```

运行结果为：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-9.png)

##四、字符数组
前面我们已经讲解过，字符型数据是以字符的ASCII代码存储在存储单元中的，一般占一个字节。由于ASCII代码属于整数形式，因此，把字符型归纳为整数类型中的一种。
由于字符数据的应用十分广泛，尤其是作为字符串形式的使用，有其自己的特点，我们单独成节来讲述该内容。

**注意：**c语言中没有字符串类型，字符串都是存储在字符型数组中的。

###字符数组的定义
定义字符数组的方法与定义数值型数组的方法类似：例如：
```
char c[10];
```

以上就定义了c为字符数组，包含10个元素。

###字符数组的初始化
把各个字符以此赋给数组中格元素。例如：
```
char c[10]={'I',' ','a','m',' ','h','a','p','p','y'};
```

把这10个字符以此赋给c[0]~c[9]这10个元素。

**注意：**上面例子中花括号提供的初值个数（即字符个数）等于数组长度，倘若花括号中的提供初值个数大于数组长度，则会出现语法错误。倘若初值个数小于数组长度，则只将这些字符赋给数组中前面那些元素，其余元素自动定为空字符（即''\0'）.例如：
```
char c[10]={'I',' ','l','o','v','e',' ','c'};
```

该数组在内存的存储状态如下：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-10.png)

在定义数组时可以省略数组长度，系统会自动根据处置个数确定数组长度。例如：
```
char c[]={'I',' ','a','m',' ','h','a','p','p','y'};
```

数组c的长度自动定为10.这种方式不用人工去数字符的个数，尤其在赋初值字符个数不较多的情况下，比较方便。

（1）编写程序8-4.
     输出一个正方形。

**解题思路**：先画出一个平面正方形图案，每行包含5个字符，其中有的是空白字符，有的是'*'字符，定义一个字符型的二维数组并初始化，用for循环嵌套输出。


```
#include<stdio.h>
int main()
{
    char c[][5]={{'*','*','*','*','*'},{'*',' ',' ',' ','*'},{'*',' ',' ',' ','*'}, {'*',' ',' ',' ','*'},{'*','*','*','*','*'}};
    int i,j;
    for(i=0;i<5;i++)
      {
           for(j=0;j<5;j++) 
           printf("%c",c[i][j]);
           printf("\n");
      }
      
    return 0;  
}
```

运行结果：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-11.jpg)

—— ——||不好意思各位，没考虑到空格，输出成为了长方形，但是我相信大神们是可以输出正方形的，我们论坛见。

###字符串和字符串结束标志
在c语言中，是将字符串作为字符数组来处理的。在平时的应用中，人们往往关心的是字符串的有效长度而不是字符数组的长度。例如，定义一个字符数组长度50，而实际有效字符只有30个。为了测定字符串的实际长度，c语言规定了一个“字符串结束标志（'\0'）”，以字符'\0'作为结束标志。如果字符数组中存在若干字符，前面9个字符都不是空字符（'\0'）,而第10个字符是'\0'，则认为数组中有一个字符串，其有效字符为9个。
c系统在用字符数组存储字符串常量时会自动加一个'\0'作为结束符。
例如：
```
printf("Shiyanlou");
```
在执行次语句时系统怎么知道该输出到哪里为止呢？实际上，在向内存中存储时，系统自动在最后一个字符'u'后面加一个'\0'作为字符串结束标志。在执行printf函数时，每输出一个字符检查一次，看下一个字符是否为'\0'，遇到'\0'就停止输出。

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-12.png)

有了上述理解，在对字符数组初始化的方法上面我们做出一些补充。例如：
```
char[]={"I love shiyanlou"};
```

我们也可以直接省去花括号：
```
char[]="I love shiyanlou";
```

这里不像之前单个字符作为字符数组的初值，而是用字符串作为初值（字符串做初值是用双撇号而不是单撇号）。这种方法更直观、更方便。

**注意：**此时数组的长度是17，而不是16，因为字符串常量的最后系统自动加了一个'\0'。上面的初始化与下面的初始化等价的。
```
char c[]={'I',' ','l','o','v','e',' ','s','h','i','y','a','n','l','o','u','\0'};
```

和下面的这个不等价：
```
char c[]={'I',' ','l','o','v','e',' ','s','h','i','y','a','n','l','o','u'};
```

###字符数组的输入输出
字符数组的输入输出可以有两种方法。
（1）逐个字符输入输出，用格式“%c”输入或者输出一个字符。
（2）将整个字符串一次输入或者输出，用“%s”格式符，例如：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-13.png)

内存中数组c的存储情况：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-12.png)

##使用字符串处理函数
c语言函数库中提供了一些用来专门处理字符串的函数，使用比较方便。

####puts函数-输出字符串的函数
其一般形式如下

**puts（字符数组）**

起作用是讲一个字符串输出到终端，因此该函数用的不是很多，我们可以编写8-5一个小程序来体验：
```
#include<stdio.h>
#include<string.h> //在使用字符串处理函数时，在程序文件的开头用#include<string.h>
int main()
{
   char str[]="China\nChengdu";
   puts(str);
   return 0;
}
```

运行结果为：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-14.png)

####gets函数-输入字符串的函数
一般形式为

**gets（字符数组）**

其作用是从终端输入一个字符串到字符数组，并且得到一个函数值。
我们对上一个程序稍加修改，程序如下：
```
#include<stdio.h>
#include<string.h> //在使用字符串处理函数时，在程序文件的开头用#include<string.h>
int main()
{
   char str[100];
   gets(str);
   printf("%s\n", str);
   return 0;
}
```

运行结果为：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-15.png)

####strcat函数-字符串连接函数
其一般形式为

**strcat（字符数组1，字符数组2）**

其作用是把两个字符数组中的字符串连接起来，把字符串2接到1后面，结果放到字符串1中。编写程序8-6：
```
#include<stdio.h>
#include<string.h> //在使用字符串处理函数时，在程序文件的开头用#include<string.h>
int main()
{
   char str1[30]="People's Republic of";
   char str2[]="China";
   printf("%s",strcat(str1,str2));
   return 0;
}
```

运行结果：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-16.png)

**注意：**

（1）连接前两个字符串后面都有'\0'，连接时将字符串1后面的'\0'取消，只在新串后面保留'\0'
（2）字符串1必须足够大，以便于容纳字符串2。如果在定义是定义为`char str1[]="People's Republic of";`就会出现问题，因为长度不够。

####strlen函数-测字符串长度的函数

一般形式:

**strlen(字符数组)**

它是测量字符串长度的函数。函数的值为字符串中的实际长度（不包含'\0'在内）。例如：
```
#include<stdio.h>
#include<string.h> //在使用字符串处理函数时，在程序文件的开头用#include<string.h>
int main()
{
   
   char str[]="China";
   printf("%d",strlen(str));
   return 0;
}
```

运行结果：

```
5
```

####strcpy和strncpy——字符串复制函数

一般形式为：

**strcpy（字符数组1，字符数组2）**

作用是将字符串2复制到字符串1中。例如：
```
#include<stdio.h>
#include<string.h> //在使用字符串处理函数时，在程序文件的开头用#include<string.h>
int main()
{
   char str1[10],str2[]="China";
   strcpy(str1,str2);
   printf("%s",str1);
   
   return 0;
}
```

运行结果：

```
China
```

**注意：**

（1）字符数组1必须定义的足够大，以便容纳被复制的字符串2.
（2）“字符数组1”必须携程数组名形式（如str1），“字符串2”可以使字符数组名，也可以是一个字符串常量。例如：
```
strcpy(str1,"China");
```
作用与前面的相同
（3）不能用赋值语句将一个字符串常量直接给一个字符数组。如下面两行是错误的：
```
str1="shiyanlou";  //错误，企图用赋值语句将一个字符串常量直接赋值给一个数组
str1=str2;          //错误，企图用赋值语句将一个字符数组直接赋给另一个字符数组
```

###strcmp——字符串比较函数

一般形式

**strcmp（字符串1，字符串2）**

它的作用是比较字符串1和字符串2.例如：

```
strcmp(str1,str2);
strcmp("Chengdu","Beijing");
```

**比较规则**：将两个字符串自左向右逐个字符比较（按照ASCII码值大小比较），直到出现不同的字符或者遇到'\0'为止。
（1）如果全部字符相同，则认为两个字符串相同。
（2）若出现不同的字符，则以第1对不相同的字符的比较结果为准。例如：
"A"<"D","e">"E","these">"that","computer">"compare"

比较结果由函数值带回。
（1）字符串1=字符串2，则函数值为0
（2）字符串1>字符串2，则函数值为一个正整数
（3）字符串1<字符串2，则函数值为一个负整数

**关于字符串处理函数，还有strlwr函数（转换为小写的函数）、strupr函数（转换为大写的函数）等其它函数，我们这里不再一一阐述，有兴趣的小伙伴可以查询相关内容。**

###字符数组应用举例

任意键入3个字符串，编程找出最小的一个。

```
#include<stdio.h>
#include<string.h> //在使用字符串处理函数时，在程序文件的开头用#include<string.h>
int main()
{	char string[30];
	char ch[3][30];
	int i;
	for(i=0;i<3;i++)
		gets(ch[i]);
	strcpy(string,ch[0]);
	for(i=1;i<3;i++)
		if(strcmp(ch[i],string)<0)
			strcpy(string,ch[i]);
	printf("The result is :\n%s\n",string);
	
	return 0;
}

```

运行结果为：

![Alt text](https://dn-anything-about-doc.qbox.me/c/8-17.png)

##五、小结
本节课讲述的内容较多,需要大家多多练习方可掌握，接下来的练习题大家也务必自己独立思考并完成程序编写才能融会贯通，掌握数组知识。

##六、练习
（1）输入20个实数存放在一维数组中，输出它们的平均值以及高于平均的数的个数。

（2）围绕着山顶有10个洞，一只兔子和一只狐狸住在各自的洞里，狐狸总想吃掉兔子，一天兔子对狐狸说，你想吃我有一个条件，你先把洞编号1到10，你从第10洞出发，先到第1号洞找我，第二次隔一个洞找我，第三次隔两个洞找我，以后依次类推，次数不限，若能找到我你就可以饱餐一顿，在没找到我之前不能停止，狐狸一想只有10个洞，寻找的次数又不限，哪有找不到的道理，就答应了条件，结果狐狸跑得昏了过去也没找到兔子，请问兔子躲在哪个洞里。程序中可假定狐狸找了1000次。 



















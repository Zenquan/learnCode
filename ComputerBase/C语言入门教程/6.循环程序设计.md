##一、为什么需要循环控制
前几节课我们学习程序中常用到的顺序结构和选择结构，但是只有这两种结构结构是不够的，还需要用到循环结构。因为在日常生活中或是在程序所处理的问题中常常遇到需要重复处理的问题：
+ 计算1+2+3......+100的和                                     （重复相同的加法操作）
+ 统计班级里面所有学生考试成绩在80分以上的人              （重复判别操作）
+ 计算全班50个人的考试平均成绩                            （重复的计算操作）

按照我们之前学到的知识，如果计算全班50个人的平均成绩，我们会先编写求一个人的平均成绩段。
```
scanf("%f%f%f%f",&score1,&score2,&score3,&score4);    //输入一个学生4门课程的成绩
aver=(score1+score2+score3+score4)/4;               //求该学生的平均成绩
printf("aver=%7.2f",aver);                          //输出该学生平均成绩
```

然后再重复写49个同样的程序段。这种方法虽然可以实现要求，但是显然不可取的，因为这样工作量大、程序冗长，难以阅读，这是编程中最笨的方法。
在c语言中我们可以采取这样的循环语句来处理上述问题：
```
i=1;
while(i<=50)
{
    scanf("%f%f%f%f",&score1,&score2,&score3,&score4);    //输入第i个学生4门课程的成绩
    aver=(score1+score2+score3+score4)/4;                //求第i个学生的平均成绩
    printf("aver=%7.2f",aver);                           //输出第i个学生的平均成绩
    i++；                                                //每执行完一次循环使i的值加1，直到i<=50不成立跳出循环。
}
```
大多数应用程序都会包含循环结构。循环结构、顺序结构和选择结构是结构化程序设计的3种基本结构，它们是包含各种复杂程序的基本构成单元。

##二、本节目标
我们本节课程将要讲述一下内容：
+ 用while语句实现循环
+ 用do...while语句实现循环
+ 用for语句实现循环
+ 改变循环的执行状态
+ 循环的嵌套


##三、用while语句实现循环
while循环的循环特点是先判断表达式后执行循环体语句。
一般语法如下：
```
while(expression)
     statement1;
     
statament2;
```
statement1和statement2既可以是单个语句也可以是语法块，其语法结构如下：

![此处输入图片的描述][1]


我们通过一个例子来学习怎样利用while语句进行循环程序设计。
例7-1.求1+2+3+4+5+6......+100

**解题思路**
这是我们从小学到初中经常看到的一个练习题，我们会用很多简便方法去计算，而对于计算机我们可能需要用最笨的方法计算了。
（1）作为一个累加问题，需要重复进行100次的加法运算，显然可以用循环结构来实现，重复执行循环体100次，每次加一个数。
（2）我们会发现每次累加的数是有规律的，后一个数是前一个数加1，因此不需要每次通过用scanf语句从键盘临时输入数据，只需要再加完一个数i后，使i加1就可得到下一个数。

![此处输入图片的描述][2]

**运行结果如下**

![此处输入图片的描述][3]

循环体如果包含一个以上的语句，应该用花括号括起来，作为复合语句出现。如果不加花括号，则while语句的范围只到while后面第一个分号处。如本例中的while语句如果无花括号，则while语句范围只到“sum=sum+i；”

##四、用do...while语句实现循环
while循环体是先判断再循环，而do...while语句是先循环后判断。do...while语句的一般形式如下：
```
do
  statement;
while(expression);
```

statement就是循环体。
**注意**：和while语句不同，do...while语句中的while（）；后面是有“；”的。

我们这次用do...while来实现1到100的累加。

![此处输入图片的描述][4]

通过7-1.c和7-2.c可以看到，对同一个问题可以用while语句处理，也可以用do...while语句处理。do...while语句结构可以转换成while结构，很多情况两者是等价的。**但是如果while后面的表达式一开始为假的时候，两者循环结构是不同的。**

我们举例说明while和do...while循环的比较。设计7-3和7-4的程序
（1）用while循环
```
#include<stdio.h>
int main()
{
   int i,sum=0;
   printf("please enter i:");
   scanf("%d",&i);
   while(i<=100)
   {
      sum=sum+i;
      i++;
   }
   printf("sum=%d\n",sum);
}
```


(2)用do...while循环
```
#include<stdio.h>
int main()
{
   int i,sum=0;
   printf("please enter i:");
   scanf("%d",&i);
   do
   {
      sum=sum+i;
      i++;
   }while(i<=100);
   printf("sum=%d\n",sum);
}
```

每个程序运行两次，结果如下：

![此处输入图片的描述][5]

我们可以得到以下结论：当while后面的表达式的第一次值为“真”时，两种循环得到的结果是相同的；否则，二者结果不相同。

##五、用for语句实现循环
除了可以用while语句和do...while语句实现循环外。c语言还提供for语句实现循环，for语言十分灵活，很多情况下他完全可以替代while语句。

**for语句的一般形式如下：
for（表达式1；表达式2；表达式3）
  语句**
  
3个表达式的作用如下：

**表达式1**：设置初始条件，只执行一次。可以为零个、一个或者多个表达式赋初值。

**表达式2**：是循环条件表达式，用来判定是否继续循环。在每次执行循环体前限制性此表达式，决定是否继续执行循环。

**表达式3**：作为循环的调整，例如循环变量的增值，是在执行完循环体后才进行的。
  
 
**我们依然用1到100的和这个计算题来理解for语句，程序如下：**

![此处输入图片的描述][6]

for语句的执行过程如下：
+ （1）先求解表达式1。本例中的表达式1就是i=1，即把整数1赋值给i。
+ （2）求解表达式2。若此条件表达式的值为真（非0），则执行for语句的循环体，然后执行第三步。若为假（0），则结束循环，转到第（5）步。
+ （3）求解表达式3。在本例中，执行i++，使i的值加1，i的值变成2。
+ （4）转回步骤2继续执行。
由于此时i=2，表达式i<=100的值为真，再次执行循环体中的语句。然后再执行步骤（3)。如此反复，知道i的值变到了101，此时表达式i<=100的值为假，不再执行循环体，而转到步骤（5）。
+ （5）循环结束，执行for语句下面的一个语句。

上面的for语句
```
for(i=1;i<=100;i++)
sum=sum+i;
```

其执行过程和下面语句相当：
```
i=1;
while(i<=100)
{
   sum=sum+i;
   i++;
}
```

显然用for语句更简单、方便。

###关于for语句的一些说明
（1）for语句的一般形式
**for(表达式1；表达式2；表达式3)语句**
可以改写成为while循环的形式：
表达式1；
**while （表达式2）
{
  语句
  表达式3
}**

两者是无条件等价的。

（2）表达式1可以省略，即为不初值。但是表达式1后面的分号不能省略。例如：
```
i=1;
for(;i<=100;i++)sum=sum+i;
```

（3）表达式2也可以省略。代码如下：
```
for(i=1;;i++)sum=sum+i;
```

此时循环将会无终止的进行下去，默认为表达式2是真。

（4）表达式3也可以省略，代码如下：
```
for(i=1;i<=100;)
{
  sum=sum+i;
  i++;
}
```

i++操作不放在表达式3原本的位置，放到循环体中效果是一样的。

**通过以上介绍，我们知道了c语言的for循环语句变化多端，十分灵活。但是我们应该注意的是不要过分利用这一特点，这样会使的for语句显得杂乱，可读性差**

##六、改变循环的执行状态

我们上一章节在switch语句中使用过break语句。它的作用是终止switch块中代码的执行，并继续执行跟在switch后的第一行语句。break语句在循环体内的作用和switch基本相同。

例：某电商网站某天做促销活动，当天新注册的用户（1000人）购物全部9折，当新注册用户购买商品总金额超过10万，停止活动。统计此时购物的新注册用户人数以及平均每人购物的金额。


for语句本来循环1000次。在每一次循环中，输入一个新注册用户的购买金额，然后把它累加到total中，如果没有if语句，则执行循环体1000次。现在设置一个if语句，在每一次累加了购买金额amount后，立即检查累加和total是否达到或者超过SUM，当total>=100000时，就执行break语句，流程跳转到循环体的花括号外，即不再继续执行其余的几次循环，提前结束循环。此时的i是什么呢？是已经购买商品的新注册用户。

实现中的核心代码如下：

```
for (i=0; i < 1000; i++) {
   # 初始化购买金额
   int money = 0;
   
   # 输入新的购买金额
   scanf("%d", &money);
   
   # 增加到总金额里
   total += money;
   
   # 判断是否达到停止活动条件
   if (total > 100000)
      break;
}
```

contine 语句与 break 语句不同，并不停止循环，而是跳出当前循环的状态继续执行下一轮的循环。

例：求取100-200之间所有不可以被3整除的数，并打印出来。实现过程中凡是遇到可以被3整除的数则跳过循环内的后面所有的代码，继续执行下一轮循环。

![Alt text](https://dn-anything-about-doc.qbox.me/md04173357-9.png)

执行结果如下：

![Alt text](https://dn-anything-about-doc.qbox.me/md04173357-10.png)

continue的作用为结束本次循环，就是跳过循环体中下面尚未执行的语句，然后接着下一次的循环操作。
continue语句是结束本次循环，而不是终止整个循环的执行。而break语句则是结束整个循环过程，不在判断执行循环的条件是否成立。

##七、循环的嵌套
一个循环体内又包含另外一个完整的循环结构，称为循环的嵌套。内嵌的循环中还可以嵌套循环，这就是多层循环。while循环、do...while循环和for循环可以互相嵌套。我们在这里不敞开一一讲述，举一个for循环的嵌套供大家理解，以后的学习中我们还会经常遇到其他嵌套。

输出一下4*5的矩阵
1  2   3   4   5
2  4   6   8  10
3  6   9  12  15
4  8  12  16  20

我们可以使用嵌套来处理此问题，用外循环来输出一行数据，用内循环来输出一列数据。要注意设法输出以上矩阵的格式（每行5个数据），即每输出万5个数据后换行。

![Alt text](https://dn-anything-about-doc.qbox.me/md04173357-12.png)


输出结果：

![Alt text](https://dn-anything-about-doc.qbox.me/md04173357-11.png)

该程序包含一个双重循环，是for循环的嵌套。外循环变量i由1变到4，用来控制输出的4行数据，内循环变量j由1变到5，用来控制输出中的5个数据。输出的值是i\*j。在执行第1次外循环体时，i=1，j由1变到5，因此i\*j就是1,2,3,4,5.在执行第二次外循环时，i=2，j由1变到5，因此i*j的值就是2，4，6，8，10。以此类推。

##小结
我们本节课讲述了c语言的循环语句，大家可以通过练习体验while，do...while和for语句之间的区别和联系,同时讲述循环的中断与嵌套。循环语句想要真正的掌握就必须大量的进行编程练习。

##练习
1.有一个分数序列
2/1,3/2,5/3,8/5,13/8,21/13,.......
求这个序列的前20项之和

2.输出一下图案：
```
    *
   ***
  *****
 *******
  *****
   ***
    *
```








  
  


  [1]: https://dn-anything-about-doc.qbox.me/md04173357-1.png
  [2]: https://dn-anything-about-doc.qbox.me/md04173357-2.png
  [3]: https://dn-anything-about-doc.qbox.me/md04173357-3.jpg
  [4]: https://dn-anything-about-doc.qbox.me/md04173357-4.png
  [5]: https://dn-anything-about-doc.qbox.me/md04173357-5.png
  [6]: https://dn-anything-about-doc.qbox.me/md04173357-6.png